
# How to start
使用二进制 Crate - 在 src/bin 目录下创建多个文件
这是最常用的方法，我来展示如何修改项目结构：
首先，将现有的 main.rs 移动到一个新的文件中：
Bash
rs
然后可以创建更多的程序文件，例如：
```
fn main() {
    println!("Hello from another binary!");
}
```

```rust
fn main() {
    let x = 15;
    let y = 3;
    
    println!("加法: {} + {} = {}", x, y, x + y);
    println!("减法: {} - {} = {}", x, y, x - y);
    println!("乘法: {} * {} = {}", x, y, x * y);
    println!("除法: {} / {} = {}", x, y, x / y);
}
```

现在你可以通过以下方式运行不同的程序：
Bash
calculator
其他建议：
1. 如果这些程序之间需要共享代码，你可以：
在 src/lib.rs 中定义共享函数和模块
使用 mod 关键字在 src 目录下创建共享模块
每个二进制文件都需要有自己的 main() 函数作为入口点
在 Cargo.toml 中，这些二进制文件会自动被识别，不需要特别配置
这种组织方式可以让你在同一个项目中维护多个相关的程序，同时共享代码和依赖项。



# 堆和栈

在计算机科学中，“堆”（heap）是一种内存区域，用来存储程序在运行时动态分配的数据。我们可以通过理解堆的用途和行为，来更好地理解 Rust 中的 `String` 和 `&str` 类型的区别。

### 什么是堆？

计算机内存通常分为两个主要区域：**堆** 和 **栈**。这两个区域的主要区别在于它们的**分配方式**和**生命周期管理**。

- **栈（Stack）**：栈是一种连续的内存区域，用于存储局部变量、函数调用等小而固定大小的数据。栈上的数据具有自动的生命周期管理（例如函数调用结束后，栈上分配的数据会自动释放）。由于栈分配非常高效，常用于存储一些小型、固定大小的数据类型，例如整数、浮点数和 `char`。
- **堆（Heap）**：堆是动态分配的内存区域，不要求数据有固定的大小，也不限制其存储的数据量。在堆上分配的数据不会自动释放，通常由开发者显式管理。大多数编程语言中，我们可以通过手动或自动的内存管理来回收这些内存（Rust 使用**所有权机制**和**借用检查**来自动管理内存，避免内存泄漏）。

简单来说，堆适合用来存储**大小不确定且生命周期灵活的数据**。例如，当我们不知道字符串的长度时，可以把它存放在堆上。

### `String` 类型在堆上的理解

在 Rust 中，`String` 类型的数据是存储在堆上的，因为字符串的长度不固定，用户可以在程序运行时修改字符串的内容或增加其长度。堆上的数据没有固定的内存大小要求，它允许动态增长。而 `String` 类型就是一种典型的**堆分配**数据类型，具备**可变性**和**拥有所有权**的特性。

下面是对 `String` 和 `&str` 的对比理解：

- **`String`**：它是一个动态的、可变的字符串，数据存储在堆上。我们可以更改 `String` 的内容，因为它的大小在程序运行过程中是可以变化的。由于它在堆上，所以当我们不再需要它时，Rust 会自动释放它占用的内存（因为它拥有所有权）。
  
  **示例：**
  ```rust
  let mut s = String::from("Hello");
  s.push_str(", world!"); // 增加字符串内容
  println!("{}", s); // 输出 "Hello, world!"
  ```

  在这里，`s` 是一个 `String`，可以在堆上动态增长。Rust 在 `s` 的作用域结束时，会自动回收它的内存。

- **`&str`**：`&str` 是一种不可变的字符串切片，通常用于引用固定的字符串。例如，字面量字符串（如 `"Hello"`）在编译时已经确定，存放在栈或其他只读内存区域中，因此可以通过 `&str` 类型来引用它们。

  **示例：**
  ```rust
  let greeting: &str = "Hello, world!";
  println!("{}", greeting); // 输出 "Hello, world!"
  ```

  在这里，`greeting` 是一个 `&str` 类型的字符串引用。因为它是一个不可变引用，不能修改内容。而 `&str` 本质上是对字符串数据的只读引用。

### 总结

- **栈**用于小而固定大小的数据，例如整数、浮点数和 `char`。数据存储在栈上会自动管理其生命周期。
- **堆**适用于大小不确定、需要动态分配的内容，例如 `String`。`String` 是一个堆上的字符串，可以动态增长、拥有所有权，并且在使用结束后自动释放内存。
- **`String`** 和 **`&str`** 的关系是，`String` 是一个在堆上的字符串数据，而 `&str` 是对字符串数据的一个不可变引用。

通过理解堆和栈，我们可以更清楚地看到 Rust 的内存管理方式如何帮助开发者避免内存泄漏和数据竞争等问题。Rust 的所有权和借用机制使得我们可以安全高效地使用堆和栈上的数据。
